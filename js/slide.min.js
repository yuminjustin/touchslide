!function(a){var b,c,d,e,f,g,h,i,j,k,l=!0,m=3e3,n=function(f){b=f.s,c=f.s2,d=f.c,e=a("img",c).length,"undefined"!=typeof f.a&&(l=f.a),"number"==typeof f.t&&f.t>1e3&&(m=f.t),r(),v()},o=a(window).width(),p=a(window).height(),q=0,r=function(){if(c.height(p),1==e)return!1;2>=e&&e>1&&c.append(c.html()),b.width(o).height(p),f=a("li",c),f.width(o).height(p),x.rollback();for(var h=0;e>h;h++)d.append("<span></span>");a("span:eq(0)",d).addClass("sOn"),d.css("margin-left",d.width()*-.5);for(var h=0,i=f.length;i>h;h++){var j=f[h];j.sn=i-1>h?h+1:0,j.sp=h>0?h-1:i-1,j.style.display="none"}g=f[0],a(g).show().css("left",0),a(f[g.sn]).show().css("left",o),a(f[g.sp]).show().css("left",-o),l&&(l=setTimeout(function(){s()},m))},s=function(){u.move({p:"-="+o,n:"-="+o,o:"-="+o},u.next),l&&(l=setTimeout(function(){s()},m))},t=function(){var b=a(".sOn",d),c=a("span:eq("+q+")",d);c.addClass("sOn"),b.removeClass("sOn")},u={next:function(){a(f[g.sp]).hide(),g=f[g.sn],a(f[g.sn]).show().css("left",o),e-1>q?q++:q=0,t(),x.rollback()},prev:function(){a(f[g.sn]).hide(),g=f[g.sp],a(f[g.sp]).show().css("left",-o),q>0?q--:q=e-1,t(),x.rollback()},move:function(b,c){x.transition(),a(f[g.sp]).css({left:b.p}),a(f[g.sn]).css({left:b.n}),a(g).css({left:b.o}),w(g,c)}},v=function(){c.on("touchstart",function(){clearTimeout(l),h=parseInt(a(f[g.sp]).css("left")),i=parseInt(a(g).css("left")),j=parseInt(a(f[g.sn]).css("left"))}),c.drag(function(b,c){a(f[g.sp]).css({left:h+(c.x-c.xs)}),a(g).css({left:i+(c.x-c.xs)}),a(f[g.sn]).css({left:j+(c.x-c.xs)}),k=Math.abs(c.x-c.xs)>=.5*o?c.x-c.xs<0?"next":"prev":"none"}),c.on("touchend",function(a){a.preventDefault(),"prev"==k?u.move({p:0,n:2*o,o:o},u.prev):"next"==k?u.move({p:-2*o,n:0,o:-o},u.next):u.move({p:h,n:j,o:i},function(){}),l&&(l=setTimeout(function(){s()},m))})},w=function(a,b){var c=function(){b(),a.removeEventListener("webkitTransitionEnd",c,!1),a.removeEventListener("transitionend",c,!1)};a.addEventListener("webkitTransitionEnd",c,!1),a.addEventListener("transitionend",c,!1)},x={rollback:function(){f.css({"-webkit-transition":"all 0s","-moz-transition":"all 0s",transition:"all 0s"})},transition:function(){f.css({"-webkit-transition":"all 0.8s","-moz-transition":"all 0.8s",transition:"all 0.8s"})}};window.touchslide=n}(jQuery);
